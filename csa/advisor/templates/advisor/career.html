{% extends "base.html" %}

{% block head %}
<ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/career">Careers</a></li>
    <li class="active">{{career.name}}</li>
</ol>

<span>
<span style="padding-right: 2em" ><font size="7">{{ career.name }}</font></span>

<a onclick="toggleLike(this)" class="btn {% if career_liked %} btn-danger {% else %} btn-warning {% endif %} btn-xs" role="button">
    {% if career_liked %}
        Unlike
    {% else %}
        Like
    {% endif %}
</a>

</span>

<div class="tag">
{% for category in categories %}
<a class="btn btn-primary btn-sm" role="button" href="/category/{{ category.name }}">{{ category }}</a>
{% endfor %}
</div>
<br>
{% endblock %}

{% block body %}
<div class ="index-link">
<div id="container">
    <div id="one" >
        <h3>Description</h3>
        <p>{{ career.description }}</p>
        <br>
        <h3>Where to study</h3>
        {% for inst in institutions %}
        <p ><a href="/career/{{ career.name }}/{{ inst }}">{{ inst }}</a></p>
        {% endfor %}
    </div>
    <div id="two">
        
        <h3>Companies</h3>
        {% for comp in companies %}
        <p><a href={{comp.site_url}}>{{ comp.name }}</a></p>
        {% endfor %}
        <br>
        <h3>Similar Careers </h3>
        {% for currCareer in similarCareers %}
        <p><a href="/career/{{ currCareer.name }}">{{ currCareer }}</a></p>
        {% endfor %}
        </ul>
    </div>
   <!-- <div id="three">
        <p><a href="/career">to career index</a></p>
        <p><a href="/">to home page</a></p>
    </div>-->
    
</div>
    </div>
    
{% endblock %}

{% block scripts %}
<script type="text/javascript">
    function toggleLike(button) {
    button = $(button);
    action = button.text().toLowerCase().trim();
    $.ajax(window.location.pathname, {
        type: "POST",
        headers: {"X-CSRFToken": $.cookie('csrftoken')},
        data:    {action: action},
        success: function(data, textStatus, jqXHR)  {
            if(action == "like")    {
                button.text("Unlike");
                button.removeClass("btn-warning")
                button.addClass("btn-danger")
            }
            else    {
                button.text("Like");
                button.removeClass("btn-danger")
                button.addClass("btn-warning")

            }
        }
    });
}

</script>
{% endblock %}
